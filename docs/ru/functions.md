# Обзор функций

_Переключить язык на: [английский](../en/functions.md)_

В документе о каждой функции написано:

- Что она делает
- Её параметры
- Рекомендации 
- Ограничения
- Примеры использования

Функции могут работать с разной точностью. Чтобы получить лучший результат, следуйте рекомендациям.

Ограничения показывают, каких неточностей стоит ожидать (даже при выполнении рекомендаций).

_Связанные документы:_

- [Причины появления рекомендаций и ограничений](docs/ru/explanation.md)
- [Поддерживаемые системы транскрипции/транслитерации](docs/ru/systems.md)

_Быстрая навигация:_

1. [fromKana()](#fromKana)
2. [toKana()](#toKana)
3. [convertKana()](#convertKana)

## fromKana()

#### Что делает

Преобразует кану к русским или английским слогам.

#### Параметры

```ts
fromKana(text: string, toLang?: string)
fromKana(text: string, system?: string)
fromKana(text: string, options?: object)
```

- text - текст, где использована кана
- toLang - язык, к которому привести
  - en (по умолчанию)
  - ru
- system - система, с помощью которой преобразовывать

  *для английского*
  
    - hepburn (по умолчанию)
    - kunrei-shiki
    - nihon-shiki

  *для русского*
  
    - polivanov (по умолчанию)
    - nonstandard-ru
    - static-ru
    
 - options - объект, в который можно включить оба необязательных свойства _(хотя для полного контроля достаточно указать систему)_
  
#### Рекомендации

- Разделяйте слова пробелом

#### Ограничения

- Пары гласных えい, おう переводятся побуквенно. Выходит [эи] и [оу] соответственно

#### Примеры использования

```javascript
const kanaText = 'わたし は じぶん に おちゃ を たてました'
// Здесь пробел позволяет отличить, находятся ли 'は' и 'を' в положении частиц

// На русский язык; система по умолчанию - 'polivanov'
// То же, что fromKana(kanaText, 'polivanov')
fromKana(kanaText, 'ru')
// => 'ватаси ва дзибун ни отя о татэмасита'

// По nonstandard-ru
fromKana(kanaText, 'nonstandard-ru')
// => 'ватащи ва джибун ни очя о татэмащита'

// Без доп. настроек - по системе Хепбёрна
// То же, что fromKana(kanaText, 'hepburn') или fromKana(kanaText, 'en')
fromKana(kanaText)
// => 'watashi wa jibun ni ocha o tatemashita'

// По kunrei-shiki
fromKana(kanaText, 'kunrei-shiki')
// => 'watasi wa zibun ni otya o tatemasita'
```

## toKana()

#### Что делает
  
Приводит текст, написанный русскими или английскими слогами, к одной из японских азбук.
  
#### Параметры
  
```ts
toKana(text: string, fromLang?: string)
toKana(text: string, system?: string)
toKana(text: string, toKana?: string)
toKana(text: string, guess?: boolean)
toKana(text: string, options?: object)
```

- text - строка слогов, приводимая к одной из японских азбук
- fromLang - язык, с которого преобразовывать
  - en (по умолчанию)
  - ru
- system - система, с помощью которой преобразовывать

  *для английского*
  
  - hepburn (по умолчанию)
  - kunrei-shiki
  - nihon-shiki

  *для русского*
  
  - polivanov (по умолчанию)
  - nonstandard-ru
  - static-ru
    
- toKana - к какой кане привести
  - hiragana (по умолчанию)
  - katakana
- guess - включить опцию угадывания неслышных гласных
  - false (по умолчанию)
  - true
- options - объект, позволяющий настроить все вышеприведённые дополнительные свойства
 
> [!IMPORTANT]
> guess позволяет обрабатывать текст с пропущенными неслышными гласными, но этим режимом вызваны некоторые из описанных ниже рекомендаций и ограничений

#### Рекомендации
  
- Разделяйте слова пробелом
- Если после слоговой _н_ (_n_) в слове идёт гласная, сопровождайте _н_: 
  -  _(на русском)_ - _ъ_ - твёрдым знаком 
  -  _(на английском)_ - _'_ - апострофом
- _(на русском; `guess: true`)_ Если в вашем тексте содержатся слоги с пропущенной неслышной гласной, сопровождайте мягкие согласные таких слогов мягким знаком _ь_.

#### Ограничения
  
- Долгота гласных отображается только их повторением
- Неслышная _и_
  - _(с русского; `guess: true`)_ выводится при употреблении мягкого знака или всегда мягких согласных
  - _(с английского; `guess: true`)_ выводится только от согласных 'sh', 'ch', 'j'
- Две одинаковые согласные подряд в одном слове **всегда** понимаются как двойной согласный. Значит, если вы включили угадывание неслышных гласных с помощью `guess: true`, будьте готовы, что неслышная гласная между одинаковыми согласными не считывается
- Если `guess: true`, не считываются слоги расширенной каны, которые содержат два согласных подряд, как "тви", "квэ" и т. п
- ***Не используется знак ー***

#### Примеры использования

##### Параметры _fromLang_ и _system_

```javascript
// С русского языка; система Поливанова по умолчанию
// То же, что toKana([text], 'polivanov')
toKana('ватаси ва дзибун ни отя о татэмасита', 'ru')
// => 'わたし は じぶん に おちゃ を たてました'

// По nonstandard-ru
toKana('ватащи ва джибун ни очя о татэмащита', 'nonstandard-ru')
// => 'わたし は じぶん に おちゃ を たてました'

// Без доп. настроек; текст понимается по системе Хепбёрна
// То же, что toKana([text], 'hepburn') или toKana([text], 'en')
toKana('watashi wa jibun ni ocha o tatemashita')
// => 'わたし は じぶん に おちゃ を たてました'

// По kunrei-shiki
toKana('watasi wa zibun ni otya o tatemasita', 'kunrei-shiki')
// => 'わたし は じぶん に おちゃ を たてました'
```

##### Параметр _toKana_
```javascript
//Поскольку система не указана, предполагается, что текст по Хепбёрну
toKana('watashi wa jibun ni ocha o tatemashita', 'katakana')
// => 'ワタシ ハ ジブン ニ オチャ ヲ タテマシタ'
```

##### Параметр _guess_

```javascript
//Поскольку система не указана, предполагается, что текст по Хепбёрну
toKana('des, mashta', true)
// => 'です, ました'
```

##### Параметр _options_

Предположим, в моём тексте, написанном по kunrei-shiki, есть пропущенная неслышная гласная, а привести этот текст нужно к катакане.

```javascript
const text = 'hisasi buri des ne'
const options = {
	system: 'kunrei-shiki',
    toKana: 'katakana',
    guess: true
}
toKana(text, options)
// => 'ヒサシ ブリ デス ネ'
```

## convertKana()

#### Что делает

Оборачивает одну кану в другую.

#### Параметры

```ts
convertKana(text: string, toKana?: string)
```

- text - текст, где использована кана
- toKana - кана, к которой привести
  - hiragana (по умолчанию)
  - katakana

#### Ограничения

- ***Не используется знак ー***

#### Примеры использования

```javascript
convertkana('タクシー')
// => 'たくしい'

//НО
convertkana('たくしい', 'katakana')
// => 'タクシイ'
```